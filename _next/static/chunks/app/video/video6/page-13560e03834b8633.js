(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{1798:function(e,t,n){Promise.resolve().then(n.bind(n,8731))},8731:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(7437),u=n(2265),c=n(3915),o=n(7776),s=n(6089);let a=e=>{let{src:t,volume:n}=e,[a,i]=u.useState(!1);(0,u.useEffect)(()=>{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{console.log("getUserMedia: ",e),e.getTracks().forEach(e=>e.stop()),i(!0)}).catch(e=>{console.error("getUserMedia error: ",e)})},[]);let d=(0,u.useMemo)(()=>{let e=document.createElement("video");return e.crossOrigin="anonymous",e.playsInline=!0,e.loop=!0,e},[]),f=(0,u.useMemo)(()=>new o.VideoTexture(d),[d]),m=(0,u.useMemo)(()=>{let e=new c.ZP;return e.attachMedia(d),e},[d]);(0,u.useEffect)(()=>()=>{m.destroy()},[m]);let g=(0,u.useRef)(null),v=(0,u.useRef)(null),p=(0,u.useRef)(null);return(0,u.useEffect)(()=>{let e=()=>{a&&(null===g.current&&(g.current=new AudioContext,v.current=g.current.createGain(),p.current=g.current.createMediaElementSource(d),p.current.connect(v.current),v.current.connect(g.current.destination),v.current.gain.value=n,console.log("connected")),console.log("audioContextRef.current.state: ",g.current.state,"mediaElementSourceRef.current: ",p.current),g.current.resume(),d.play())};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}},[n,d,a]),(0,u.useEffect)(()=>{null!==v.current&&(v.current.gain.value=n,console.log("volume changed: ",n))},[n]),(0,u.useEffect)(()=>(l()&&d.canPlayType("application/vnd.apple.mpegurl")?(d.src=t,console.log("Safari native HLS")):c.ZP.isSupported()?(m.loadSource(t),console.log("Hls.js")):console.error("HLS is not supported."),()=>{d.pause()}),[d,m,t]),(0,r.jsx)(s.JO,{args:[16,9],children:(0,r.jsx)("meshBasicMaterial",{map:f})})},l=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var i=n(7585),d=n(381),f=n.n(d);function m(){(0,u.useEffect)(()=>{new(f())},[]);let[e,t]=(0,u.useState)(.5),[n,c]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{let e=()=>{n&&(c(!n),console.log("muted: ",!n))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"range",min:0,max:1,step:.01,value:e,onChange:e=>{t(parseFloat(e.target.value))}}),(0,r.jsx)("div",{style:{height:"95dvh"},children:(0,r.jsx)(i.Xz,{children:(0,r.jsx)(a,{src:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",volume:e,muted:n})})})]})}}},function(e){e.O(0,[104,689,404,540,971,23,744],function(){return e(e.s=1798)}),_N_E=e.O()}]);